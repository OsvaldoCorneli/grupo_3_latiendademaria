<html lang="es">
    <head>
        <%- include('../partials/head.ejs') %>
        <link href="\css\editForm.css" rel="stylesheet"/>
    </head>
<body>
    <%- include('../partials/navbar.ejs') %>
    <main class="createForm">
        <% if(message !== null){ %>
        <script>
            window.onload = function() {
                alert("Producto editado con exito");
            };
        </script>
        <%}%>
            <span class="titulo">
                <h1>Editar Producto</h1>
            </span>
            <!-- <strong>Formulario Editar producto</strong> -->
            <form class="form-producto" action="/products/<%= productEdit.id %>/edit?_method=PUT" method="POST" enctype="multipart/form-data">
                <span class="contenedor1">
                    <label for="name"><b>Nombre:</b></label>
                        <input class="inputForm" 
                        id="name" 
                        type="text" 
                        name="name" 
                        placeholder="Ingresar Nombre"
                        value="<%= productEdit.name %>" 
                        />
                    <label for="description"><b>Descripcion:</b></label>
                        <textarea id="description" type="text" name="description" placeholder="Ingresar descripciÃ³n..."><%= productEdit.description %></textarea>
                    </label>
                    <label for="line">Linea:</label>
                    <select id="line" name="line">
                        <option value="sublimada" <%= productEdit.line === "sublimada" ? "selected" : null %>>Sublimada</option>
                        <option value="artesanal" <%= productEdit.line === "artesanal" ? "selected" : null %>>Artesanal</option>
                    </select>
                    
                    <label for="category"><b>Categoria:</b>
                        <% categorias.forEach((category) => { %>
                                <input id="category" type="radio" name="category" value="<%= category %>" 
                                <% if (category == productEdit.category) { %> <%= checked="checked" %> <% } %>>
                                <%= category %></input>
                        <% }) %>
                    </label>
                    <label for="color"><b>Colores:</b></label>
                    <div class="container-colorinputs"> 
                    <% productEdit.color?.forEach((color,index) =>  { %>
                        <div>
                            <input class="c<%= index %>" type="color" name="color" id="color" value="<%= color %>"/>
                            <span id="c<%= index %>" style=<%= color %>></span>
                        </div>
                    <% }) %>
                        <span id="agregar" class="button">Agregar color</span>
                    </div>

                    <label for="price"><b>Precio:</b></label>
                    <input class="inputForm" 
                        type="number"
                        id="price" 
                        name="price"
                        value="<%= productEdit.price %>" 
                    />
                    <label for="stock"><b>Stock:</b></label>
                    <input class="inputForm" 
                        type="number"
                        id="stock" 
                        name="stock"
                        value="<%= productEdit.stock %>" 
                    />
                </span>
                <span class="contenedor2">
                    <% productEdit.image.forEach((img, index) => { %>
                        <span class="imageHold">
                            <img src="<%= img %>" alt="<%= productEdit.name+index %>"/>
                            <input type="hidden" id="<%= img %>input" name="imageHold" value="<%= img %>"/>
                            <button id="deleteImage" value="<%= img %>">Borrar</button>
                        </span>
                    <% }) %>
                    <label class="button" for="image">Subir Imagen
                        <input
                            class="uploadfile"
                            type="file" 
                            id="image" 
                            name="image" 
                            accept="image/jpeg, image/png, image/jpg"
                            placeholder="Ingresar URL de imagen..."
                            multiple
                        />
                    </label>
                    <button class="button" type="submit">Editar</button>
                </form>
            </span>
            </div>
        <script src="\scripts\ntc.js"></script>
        <script src="\scripts\colorValidator.js"></script>
        <script src="\scripts\productEdit.js"></script>
    </main>
    <%- include('../partials/footer.ejs') %>
</body>
</html>